stages:
  - frontend-tests
  - test-deployment

frontend-tests:
  stage: frontend-tests
  script:
    - npm install
    - npm run test

test-deployment:
  stage: test-deployment
  script:
    - npm install
    - echo "Killing old running process."
    - kill -9 $(lsof -t -i:3000) || "Nothing to kill or kill failed"
    - npm run build
    - serve -s build -l 3000
